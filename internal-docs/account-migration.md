# アカウント連携によるデータ引き継ぎ（メール/パスワード）

## 方針
匿名ユーザーのまま作成したデータを、メール/パスワードのアカウントに **リンク** して引き継ぎます。  
リンク方式は **UIDが変わらない** ため、既存のルールセットやフォロー情報を安全に引き継げます。

## ユーザー操作フロー
### 1. 旧端末（引き継ぎ元）
1. 設定画面を開く
2. 「メールアドレス」「パスワード」を入力
3. 「登録する」を押す
4. 完了後は **この端末のデータがアカウントに紐づく**

### 2. 新端末（引き継ぎ先）
1. アプリ起動 → 設定画面を開く
2. 同じメール/パスワードで「ログイン」
3. 同じUIDのデータが読み込まれ、引き継ぎ完了

## 注意事項
- 「ログイン」は **既存アカウントへの切り替え**です。
  - 既に匿名で作成したデータがある場合、そのデータは表示されなくなる可能性があります。
  - 引き継ぎたい場合は **必ず「登録する（リンク）」を使う** のが安全です。

## Firebase 側の設定（管理者）
1. Firebase Authentication で **Email/Password** を有効化
2. 追加の設定は不要（匿名アカウント → メール/パスワードへのリンクが可能）

## 実装概要
- 設定画面に「登録する（リンク）」と「ログイン」を用意
- 匿名状態のとき：
  - 「登録する」→ `linkWithCredential`
  - 「ログイン」→ `signInWithEmailAndPassword`
- 非匿名状態のとき：
  - 現在のメールを表示、ログアウト可
